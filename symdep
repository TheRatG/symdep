#!/usr/bin/env php
<?php
if (PHP_VERSION_ID < 50400) {
    file_put_contents('php://stderr', sprintf(
        "Symfony Installer requires PHP 5.4 version or higher and your system has\n" .
        "PHP %s version installed.\n\n" .
        "To solve this issue, upgrade your PHP installation or install Symfony manually\n" .
        "executing the following command:\n\n" .
        "composer create-project symfony/framework-standard-edition <project-name> <symfony-version>\n\n",
        PHP_VERSION
    ));
    exit(1);
}
require file_exists(__DIR__ . '/vendor/autoload.php')
    ? __DIR__ . '/vendor/autoload.php'
    : __DIR__ . '/../../autoload.php';

$appVersion = '3.0.1';

// Windows uses Path instead of PATH
if (!isset($_SERVER['PATH']) && isset($_SERVER['Path'])) {
    $_SERVER['PATH'] = $_SERVER['Path'];
}
$app = new Symfony\Component\Console\Application('Symfony Deploy', $appVersion);
$app->add(new TheRat\SymDep\Command\SelfUpdateCommand());
$app->add(new TheRat\SymDep\Command\AboutCommand($appVersion));
$app->add(new TheRat\SymDep\Command\LocalDeployCommand());
$app->add(new TheRat\SymDep\Command\TestDeployCommand());
$app->add(new TheRat\SymDep\Command\ProdDeployCommand());
$app->setDefaultCommand('symdep:about');
$app->run();
